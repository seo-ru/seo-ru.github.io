/* release date : 2013-05-21 */
nhn.Component=jindo.$Class({_eventHandlers:null,_options:null,$init:function(){var a=this.constructor._instances;if(typeof a=="undefined"){this.constructor._instances=a=[];}a[a.length]=this;this._eventHandlers={};this._options={};},option:function(d,f){var b=(typeof d);if(b=="undefined"){return this._options;}else{if(b=="string"){if(typeof f!="undefined"){this._options[d]=f;return this;}else{return this._options[d];}}else{if(b=="object"){try{for(var a in d){this._options[a]=d[a];}}catch(c){}return this;}}}},fireEvent:function(b,n){var n=n?(n instanceof jindo.$Event?n._event:n):{};var f=this["on"+b];var k=this._eventHandlers[b];var l=typeof f=="function";var h=typeof k!="undefined";if(!l&&!h){return true;}k=k.concat();var j=(function(i){try{if(i instanceof Event){return true;}}catch(e){}try{if(i instanceof MouseEvent){return true;}}catch(e){}try{if(i instanceof KeyEvent){return true;}}catch(e){}try{if(("cancelBubble" in i||"preventBubble" in i)&&"type" in i){return true;}}catch(e){}return false;})(n);if(!j){try{if(typeof n._extends=="undefined"){n._extends=[];n.stop=function(){if(n._extends.length>0){n._extends[n._extends.length-1].bCanceled=true;}};}n._extends.push({sType:b,bCanceled:false});n.sType=b;}catch(d){j=true;}}if(j){n=jindo.$Event(n);}var g=[n];for(var c=2,m=arguments.length;c<m;c++){g.push(arguments[c]);}if(l){f.apply(this,g);}if(h){for(var c=0,o;o=k[c];c++){o.apply(this,g);}}if(j){return !n.bCanceled;}var a=n._extends.pop();return !a.bCanceled;},attach:function(c,a){if(arguments.length==1){jindo.$H(arguments[0]).forEach(jindo.$Fn(function(d,e){this.attach(e,d);},this).bind());return this;}var b=this._eventHandlers[c];if(typeof b=="undefined"){b=this._eventHandlers[c]=[];}b.push(a);return this;},detach:function(e,a){if(arguments.length==1){jindo.$H(arguments[0]).forEach(jindo.$Fn(function(f,g){this.detach(g,f);},this).bind());return this;}var b=this._eventHandlers[e];if(typeof b=="undefined"){return this;}for(var c=0,d;d=b[c];c++){if(d===a){b=b.splice(c,1);break;}}return this;}});nhn.Timer=jindo.$Class({_timer:null,_lastest:null,_remained:0,_delay:null,_callback:null,$init:function(){},start:function(c,a){var b=this;this.abort();this.fireEvent("wait");this._lastest=new Date().getTime();this._remained=0;this._delay=a;this._callback=c;this.resume();return true;},_clearTimer:function(){var a=false;if(this._timer){clearInterval(this._timer);a=true;}this._timer=null;return a;},abort:function(){var a=this._clearTimer();if(a){this.fireEvent("abort");}return a;},pause:function(){var a=new Date().getTime()-this._lastest;this._remained=this._delay-a;if(this._remained<0){this._remained=0;}return this._clearTimer();},resume:function(){var b=this;var a=function(c,d){b._clearTimer();b._timer=setInterval(function(){b.fireEvent("run");var e=b._callback();b._lastest=new Date().getTime();if(!e){clearInterval(b._timer);b._timer=null;b.fireEvent("end");return;}b.fireEvent("wait");if(d){a(b._delay,false);}},c);};if(this._remained){a(this._remained,true);this._remained=0;}else{a(this._delay,false);}}}).extend(nhn.Component);nhn.WatchInput=jindo.$Class({_nInterval:100,_bTimerRunning:false,$init:function(a,b){this.elInput=jindo.$(a);var c=b||this._nInterval;this.setInterval(c);this._oTimer=new nhn.Timer();this._bIE=jindo.$Agent().navigator().ie;this._wfFocus=jindo.$Fn(this._onFocus,this);this._wfBlur=jindo.$Fn(this._onBlur,this);this._wfKeyUp=jindo.$Fn(this._onKeyUp,this);},start:function(){this._sPrevValue=this.elInput.value;if(this._bIE){this._wfKeyUp.attach(this.elInput,"keyup");}else{if(this._isTimerRunning()){return;}this._wfFocus.attach(this.elInput,"focus");this._wfBlur.attach(this.elInput,"blur");}this.fireEvent("start");},stop:function(){if(this._bIE){this._wfKeyUp.detach(this.elInput,"keyup");}else{this._wfFocus.detach(this.elInput,"focus");this._wfBlur.detach(this.elInput,"blur");}this._bTimerRunning=false;this.fireEvent("stop");},getInterval:function(){return this._nInterval;},setInterval:function(a){this._nInterval=a;},_isTimerRunning:function(){return this._bTimerRunning;},_onKeyUp:function(a){this._compare();},_onFocus:function(){if(this._isTimerRunning()){clearTimeout(this._nTimerStopCall);this._nTimerStopCall=null;return;}this._bTimerRunning=true;this.fireEvent("timerStart");this._compare();var a=this;this._oTimer.start(function(){a._compare();return true;},this.getInterval());},_onBlur:function(){var a=this;this._nTimerStopCall=setTimeout(function(){a._oTimer.abort();a._bTimerRunning=false;a.fireEvent("timerStop");},this.getInterval());},_compare:function(){var a=this.elInput.value;if(a!=this._sPrevValue){this.fireEvent("change",{text:a});this._sPrevValue=a;}}}).extend(nhn.Component);nhn.AutoComplete=jindo.$Class({_data:[],input:null,suggest:null,watcher:null,listbox:null,template:"",_searchStatus:"",$init:function(f,e,c){var d=this._options;var b=this;var a=false;if(this.getCookie("NaverSuggestUse")){a=(this.getCookie("NaverSuggestUse")=="use")?false:true;}this.option({listbox:"_resultBox1",async:false,disabled:a,triangleBtn:"",sTriangleUpOn:"https://ssl.pstatic.net/static/common/snb/090513/bu_arrow_up.gif",sTriangleUpOff:"https://ssl.pstatic.net/sstatic/search/mypocket/v3/btn_atcmp_off_op2.gif",sTriangleDownOn:"https://ssl.pstatic.net/static/common/snb/090513/bu_arrow_down.gif",sTriangleDownOff:"https://ssl.pstatic.net/static/common/snb/090513/bu_arrow_down3.gif",query:function(h,g){return[];}});this.option(c);this._data=[];this._aDivId=[];this._searchStatus="";this.input=jindo.$Element(f).attr("autocomplete","off");this.suggest=jindo.$Element(e);if(this.listbox){this.template=this.listbox.html().replace(/^\s+|\s+$/g,"");}this._onInput=jindo.$Fn(this.onInput,this).bind();this.watcher=new nhn.WatchInput(f);this.watcher.attach("change",this._onInput);jindo.$Fn(this.onClick,this).attach(this.input,"focus");jindo.$Fn(this._setClickDisplay,this).attach(document,"click");if(this.option("triangleBtn")){jindo.$Fn(this._setClickTriangle,this).attach(jindo.$(this.option("triangleBtn")),"click");this.elTiangleImg=this._findElement(".triangleImg",jindo.$(this.option("triangleBtn")))[0];if(this.option("disabled")){this._setTriangleImg("hide");}}this.watcher.start();},_checkTemplate:function(){var a=this._options;this.elFrameDiv=jindo.$Element(this.suggest._element.contentWindow.document.getElementById("atcmp"));this.listbox=this._findElement("."+a.listbox,this.elFrameDiv.$value())[0];this.listbox=this.listbox?jindo.$Element(this.listbox):null;this.bCheckTemplate=true;},_setTriangleImg:function(a){var b="";if(this.option("disabled")){if(a=="show"){this.elTiangleImg.src=this.option("sTriangleUpOn");b="자동완성 접기";}else{this.elTiangleImg.src=this.option("sTriangleDownOff");b="자동완성 켜기";}}else{if(a=="show"){this.elTiangleImg.src=this.option("sTriangleUpOn");b="자동완성 접기";}else{this.elTiangleImg.src=this.option("sTriangleDownOn");b="자동완성 펼치기";}}this.elTiangleImg.title=b;this.elTiangleImg.alt=b;},_setClickTriangle:function(b){if(!this.listbox_fw){this._checkTemplate();}if(this.option("disabled")){this.useSuggest();this._setTriangleImg("show");if(this.input.$value().value){this.nListCnt=0;this._searchStatus="Triangle_false";this.onInput();b.stop();}else{var c=this._getFrameElement("atcmpStart");this._elThumbDiv.className("");c.show();this.show();b.stop();}}else{if(this.suggest.visible()){this.hide();}else{if(this.input.$value().value){this._searchStatus="Triangle_true";this.onInput();}else{var a=this._getFrameElement("atcmpIng");this._elThumbDiv.className("");a.show();this.show();}}b.stop();}},_setClickDisplay:function(a){if(!jindo.$Element(a.element)){this.hide();this.fireEvent("onBlur");return false;}if(jindo.$Element(a.element).attr("id")==this.input.attr("id")){if(this.input.$value().value){if(this.suggest.visible()){this.hide();}else{this.onInput();}}}else{this.hide();this.fireEvent("onBlur");}},query:function(b){var a=this._options;if(typeof b=="undefined"){return a.query;}a.query=b;return this;},async:function(a){if(typeof a=="undefined"){return this._options.async;}this._options.async=!!a;return this;},disabled:function(a){if(typeof a=="undefined"){return this._options.disabled;}this._options.disabled=a=!!a;if(a){this.watcher.stop();}else{this.watcher.start();}this._data=[];if(!!a&&this.suggest.visible()){this.hide();}this.paint();return this;},_getFrameElement:function(d){var b=this.suggest._element.contentWindow.document.getElementsByTagName("div");for(var a in b){try{var f=b[a].getAttribute("id");if(f){b[a].style.display="none";}}catch(g){}}var c=jindo.$Element(this.suggest._element.contentWindow.document.getElementById(d));return c;},_findElement:function(g,f){var e=f||document;var d=jindo.$A(),b="",c="";if(!/^(\w+|\*)?(?:\.(\w+))?$/.test(g)){return[];}b=RegExp.$1||"*";c=RegExp.$2?RegExp.$2+" ":"";var a=(b=="*")?e.all||e.getElementsByTagName(b):e.getElementsByTagName(b);jindo.$A(a).forEach(function(j,k,h){if(c){if((j.className+" ").indexOf(c)>-1){d.push(j);}}else{d.push(j);}});return d.$value();},paint:function(){if(this._options.disabled){return false;}if(!this.listbox){this._checkTemplate();}if(!this.listbox){return false;}var e=[];var b=this.template;var d=this._data;function f(h,i){for(var g in i){if(!i.propertyIsEnumerable(g)){continue;}h=h.replace(new RegExp("@"+g+"@","g"),i[g]);}return h;}this.suggest[d.length?"removeClass":"addClass"]("ac_noList");this.suggest[this._options.disabled?"addClass":"removeClass"]("ac_disabled");for(var c=0;c<d.length;c++){e[e.length]=f(b,d[c]);this.nListCnt++;}this.listbox.html(e.join(""));if(!jindo.$Element(this.suggest._element.contentWindow.document.getElementById("atcmp")).visible()){var a=this._getFrameElement("atcmp");a.show();}this.show();return this;},show:function(){if(this._options.disabled){return false;}if(this.suggest.height()<1){this.suggest.height(1);}this.suggest.show();this._setTriangleImg("show");this.input.$value().focus();if(this._options.disabled){this.suggest.height(0);}else{if(jindo.$Agent().navigator().ie){this.suggest.height(this.suggest._element.contentWindow.document.body.scrollHeight);}else{this.suggest.height(this.suggest._element.contentWindow.document.body.clientHeight);}this.fireEvent("acShow");}if(this.suggest.visible()!=true){this._elThumbImg._element.src="https://ssl.pstatic.net/static/book/image/thumb_atcmp2.gif";}return this;},hide:function(){if(this._options.disabled){return false;}this.selected=null;this.suggest.hide();this._setTriangleImg("hide");this.fireEvent("acHide");return this;},onInput:function(c){var b=this._options;var d=this.input.$value().value;var a=this;this._data=[];if(b.async){b.query(d,function(e){a.onDataLoad(e);});}else{this.onDataLoad(b.query(d));}},onDataLoad:function(a){this._data=a;this.paint();},onClick:function(){if(!this.bCheckTemplate){this._checkTemplate();}this.fireEvent("onFocus");},highlight:function(a,e,c,b){var d="";if(!b){d=this.makeHighPre(a,e);if(d==""){}}else{d=this.makeHighSuf(a,e);if(d==""){}}if(d==""){return a;}else{return d;}},makeHighPre:function(c,g){var f="";var e=c.replace(/ /g,"");var b=g.replace(/ /g,"");if(b==e.substring(0,b.length)){f="<strong>";for(var d=0,a=0;a<b.length;d++){if(c.substring(d,d+1)!=" "){a++;}f+=c.substring(d,d+1);}f+="</strong>"+c.substring(d,c.length);}return f;},makeHighSuf:function(a,h){var f="";var c=a.replace(/ /g,"");var m=h.replace(/ /g,"");if(m==c.substring(c.length-m.length)){for(var g=0,e=0;e<c.length-m.length;g++){if(a.substring(g,g+1)!=" "){e++;}f+=a.substring(g,g+1);}f+="<strong>";for(var d=g,b=0;b<m.length;d++){if(a.substring(d,d+1)!=" "){b++;}f+=a.substring(d,d+1);}f+="</strong>";}return f;},cutStr:function(e,h,k,g,j,b){var c=0;var f=e.length;for(var d=0;d<e.length;d++){var a=e.charAt(d).charCodeAt(0);if((a>=44032&&a<=552013)||(a>=12593&&a<=12643)){c+=k;}else{if(a>=65&&a<=90){if(a==73&&a==74){c+=j;}else{c+=g;}}else{if(a>=97&&a<=122){c+=j;}else{c+=b;}}}if(Math.floor(c)>h){f=d;break;}}return(f<e.length?e.substring(0,f)+"...":e);},callCutStr:function(b,a){return this.cutStr(b,a,2,2,1,1);},_getElementFirst:function(b){var a=b._element.firstElementChild||b._element.firstChild;if(!a){return null;}while(a&&a.nodeType!=1){a=a.nextSibling;}return a?jindo.$Element(a):null;},_getElementLast:function(b){var a=b._element.lastElementChild||b._element.lastChild;if(!a){return null;}while(a&&a.nodeType!=1){a=a.previousSibling;}return a?jindo.$Element(a):null;},_getElementIndexOf:function(d){try{var f=jindo.$Element(d).$value();var h=this._element.childNodes;var g=0;var a=h.length;for(var b=0;b<a;b++){if(h[b].nodeType!=1){continue;}if(h[b]===f){return g;}g++;}}catch(f){}return -1;},getCookie:function(d){var a=document.cookie.split(/\s*;\s*/);var c=new RegExp("^(\\s*"+d+"\\s*=)");for(var b=0;b<a.length;b++){if(c.test(a[b])){return a[b].substr(RegExp.$1.length);}}return null;},setCookie:function(c,d,b,a){if(b==0){document.cookie=c+"="+escape(d)+"; path=/; domain="+a+";";}else{document.cookie=c+"="+escape(d)+"; path=/; expires="+(new Date((new Date()).getTime()+b*1000*60*60*24)).toGMTString()+"; domain="+a+";";}}}).extend(nhn.Component);nhn.AjaxSuggestUS=jindo.$Class({_request:null,_cache:{},_data_bw:[],_data_dm:[],_data_bw_err:[],_data_dm_err:[],suggestbox:null,messagebox1:null,messagebox2:null,selected:null,_sTmpImg:"",$init:function(f,e,c){var d=this._options;var a=this;this.option({area:"searchResult",sFromName:"search",listbox_fw:"_resultBox1",listbox_bw:"_resultBox2",listbox_dm:"_resultBox3",suggestbox:"colgroup",query_var:"{query}",request_type:"xhr",request_method:"get",request_data:{},sListMaxLength:60,sListMaxLength3:60});this.elInputEl=jindo.$(f);this.option(c);this.query_var(d.query_var);this._data_bw=[];this._data_dm=[];this._data_bw_err=[];this._data_dm_err=[];d.async=true;d.query=jindo.$Fn(this._remoteQuery,this).bind();this.elForm=document.forms[d.sFromName];var b=false;this.sWhereValue=this.elForm.where.value;this.sStabValue=g_stab;this.onKeyDownFn=jindo.$Fn(this.onKeyDown,this).attach(this.input,"keydown");if(jindo.$Agent().navigator().opera){jindo.$Fn(this.handleBlur,this).attach(this.input,"blur");jindo.$Fn(this.handleFocus,this).attach(this.input,"focus");}this._oImgInstance=new Image();this._sLastKeyword="";},query_var:function(a){var b=this._options;if(typeof a=="undefined"){return b.query_var;}b.query_var=a;b.query_var_regexp=new RegExp(a.replace(/([\?\.\*\+\-\/\(\)\{\}\[\]\:\!\^\$\\])/g,"\\$1"),"g");return this;},disabled:function(a){if(typeof a=="undefined"){return this._options.disabled;}a=!!a;if(a){this._data_bw=[];this._data_dm=[];this._data_bw_err=[];this._data_dm_err=[];}return this.$super.disabled(a);},_htAdultInfoData:{},_remoteQuery:function(c,i){var f=this._options;var d=f.url.replace(f.query_var_regexp,c);var g=jindo.$H(f.request_data);var b=this;if(f.disabled){return false;}this.sQuery=[];this._data=[];this._data_bw=[];this._data_dm=[];this._data_err=[];this._data_bw_err=[];this._data_dm_err=[];c=c.replace(/\s/g,"");if(!c){return i([]);}else{this._sLastKeyword=c;}if(typeof this._cache[c]!="undefined"&&typeof this._cache[c]=="object"){if(c.toLowerCase()==this._cache[c].sQuery[0]){this.sQuery=this._cache[c].sQuery;this._data=this._cache[c].data;this._data_bw=this._cache[c].aDataBw;this._data_dm=this._cache[c].aDataDm;this._data_err=this._cache[c].data_err;this._data_bw_err=this._cache[c].aDataBwErr;this._data_dm_err=this._cache[c].aDataDmErr;return i(this._data);}}try{this._request.abort();this._request=null;}catch(h){}g.map(function(j,e,l){if(typeof j=="string"){return j.replace(f.query_var_regexp,c);}else{return j;}});function a(e){return e.replace(/^\s+|\s+$/g,"");}this._request=jindo.$Ajax(d,{jsonp_charset:"UTF-8",type:f.request_type,method:f.request_method,onload:function(l){try{var k=l.json();var j=k.items;b.sQuery=k.query;jindo.$A(j[0]).forEach(function(n,o,e){b._data[b._data.length]={encoded:encodeURIComponent(n[1][0]),txt:a(b.callCutStr(n[1][0],f.sListMaxLength)),in_txt:a(n[1][0]),sImgUrl:n[0][0]};b._htAdultInfoData[n[0][0]]={bAdultType:n[2][0],bNeedAdultConfirm:n[3][0]};});jindo.$A(j[3]).forEach(function(n,o,e){b._data_err[b._data_err.length]={encoded:encodeURIComponent(n[1][0]),txt:a(b.callCutStr(n[1][0],f.sListMaxLength)),in_txt:a(n[1][0]),sImgUrl:n[0][0],bAdultType:n[2][0],bNeedAdultConfirm:n[3][0]};b._htAdultInfoData[n[0][0]]={bAdultType:n[2][0],bNeedAdultConfirm:n[3][0]};});jindo.$A(j[1]).forEach(function(n,p,e){var q=0;for(var o=0;o<b._data.length;o++){if(b._data[o].in_txt==n[1][0]){q++;}}if(q<1){b._data_bw[b._data_bw.length]={encoded:encodeURIComponent(n[1][0]),txt:a(b.callCutStr(n[1][0],f.sListMaxLength)),in_txt:a(n[1][0]),sImgUrl:n[0][0]};b._htAdultInfoData[n[0][0]]={bAdultType:n[2][0],bNeedAdultConfirm:n[3][0]};}});jindo.$A(j[4]).forEach(function(n,p,e){var q=0;for(var o=0;o<b._data_err.length;o++){if(b._data_err[o].in_txt==n[1][0]){q++;}}if(q<1){b._data_bw_err[b._data_bw_err.length]={encoded:encodeURIComponent(n[1][0]),txt:a(b.callCutStr(n[1][0],f.sListMaxLength)),in_txt:a(n[1][0]),sImgUrl:n[0][0]};b._htAdultInfoData[n[0][0]]={bAdultType:n[2][0],bNeedAdultConfirm:n[3][0]};}});jindo.$A(j[2]).forEach(function(n,o,e){b._data_dm[b._data_dm.length]={encoded:encodeURIComponent(n[0]),txt:a(b.callCutStr(n[0],f.sListMaxLength)),in_txt:a(n[0])};});jindo.$A(j[5]).forEach(function(n,o,e){b._data_dm_err[b._data_dm_err.length]={encoded:encodeURIComponent(n[0]),txt:a(b.callCutStr(n[0],f.sListMaxLength)),in_txt:a(n[0])};});if(k.query){if(c.toLowerCase()==b.sQuery[0]){b._cache[c]={sQuery:b.sQuery,data:b._data,aDataBw:b._data_bw,aDataDm:b._data_dm,data_err:b._data_err,aDataBwErr:b._data_bw_err,aDataDmErr:b._data_dm_err};}}i(b._data);}catch(m){}}}).request(g.$value());},handleFocus:function(a){this.lastKey=null;},handleBlur:function(a){if(this.lastKey==9){this.input.$value().focus();}},handleKeyDown:function(a){this.lastKey=a.key().keyCode;},_runHotkeyFunctionWithCtrl:function(c){var b=c.key();var d=b.keyCode;if(d===49){c.stop();window.open("http://help.naver.com/ops/step2/faq.nhn?fcatid=184","_blank","width=970, height=600, toolbar=no, scrollbars=no, location=no, status=yes, menubar=no, resizable=no");}if(d===50){c.stop();this.unuseSuggest();var a=this.input.$value();a.focus();}if(d===51){c.stop();this.useSuggest();this._setFunctionOffImg("on");this._setTriangleImg("hide");}if(d===52){c.stop();this._setMoreProcess({element:$$("a[href]",this.elMoreBtn)[0],stop:function(){}});}},_getDefaultInputValue:function(){var a=this._sLastKeyword;if(typeof a==="string"&&a!==""){return a;}else{return this.input.$value().defaultValue;}},onKeyDown:function(b){if(!this.watcher._isTimerRunning()){if(!this.bCheckTemplate){this._checkTemplate();this.watcher._onFocus();}}var l=b.key();if(jindo.$Agent().navigator().opera){this.handleKeyDown(b);}var c=this._options;var m=null,d=null;var h=0,a=0,j=0,k=-1;if(this.suggest.visible()===false){if(l.keyCode===9){return;}if(l.down===true){if(this.input.$value().value!==""&&this._data.length===0&&this._data_bw.length===0&&this._data_dm.length===0){this.onInput();return;}}}if(l.ctrl){this._runHotkeyFunctionWithCtrl(b);return;}if(!this.input.$value().value||this._options.disabled){return;}if(!l.down&&!l.up&&l.keyCode!=9){if(l.enter){this.hide();}return;}if(this.nTotalListCnt>0){this.show();}else{return false;}if(jindo.$Agent().os().mac){this.input.$value().focus();this.input.$value().blur();this.input.$value().focus();this.watcher._onFocus();}if(this.selected&&!this.selected.$value().parentNode){this.selected=null;}try{h=this.listbox_fw.$value().childNodes.length;a=this.listbox_bw.$value().childNodes.length;j=this.listbox_dm.$value().childNodes.length;}catch(i){return false;}if(!this.selected){if(l.down||(l.keyCode==9&&!l.shift)){if(h){this.selected=this._getElementFirst(this.listbox_fw);}else{if(a){this.selected=this._getElementFirst(this.listbox_bw);}else{if(j){this.selected=this._getElementFirst(this.listbox_dm);}}}}else{this.hide();return;}b.stop();if(this.selected){jindo.$Element(this.selected._element).addClass("atcmp_on");this.watcher.stop();this.input.$value().value=this._getElementLast(this.selected).text();this.watcher.start();this.show();}b.stop();var f=jindo.$Element(this.selected.$value().parentNode).className();if(f){this._setParameter(this.selected.child()[0]);}this._setThumbImg();return;}jindo.$Element(this.selected._element).removeClass("atcmp_on");m=this._getElementFirst(this.selected).removeClass("atcmp_on").parent().$value();if(l.down||(l.keyCode==9&&!l.shift)){if(m.nextSibling){this.selected=this.selected.next();}else{if(this.selected.isChildOf(this.listbox_fw)){if(a>0){this.selected=this._getElementFirst(this.listbox_bw);}else{if(j>0){this.selected=this._getElementFirst(this.listbox_dm);}}}else{if(this.selected.isChildOf(this.listbox_bw)&&j>0){this.selected=this._getElementFirst(this.listbox_dm);}}}if(m===this.selected.$value()){if(l.down===true){b.stop();}this.watcher.stop();this.input.$value().value=this._getDefaultInputValue();this.input.$value().select();this.hide();this.watcher.start();return;}b.stop();}else{if(m.previousSibling){this.selected=this.selected.prev();}else{if(this.selected.isChildOf(this.listbox_bw)&&h){this.selected=this._getElementLast(this.listbox_fw);}else{if(this.selected.isChildOf(this.listbox_dm)){if(a>0){this.selected=this._getElementLast(this.listbox_bw);}else{if(h>0){this.selected=this._getElementLast(this.listbox_fw);}}}}}if(m===this.selected.$value()){b.stop();this.watcher.stop();this.input.$value().value=this._getDefaultInputValue();this.input.$value().select();this.hide();this.watcher.start();return;}b.stop();}if(this.selected){jindo.$Element(this.selected._element).addClass("atcmp_on");this.watcher.stop();var g=this.input.$value().value;this.input.$value().value=this._getElementLast(this.selected).text();this.watcher.start();}else{this.hide();}var f=jindo.$Element(this.selected.$value().parentNode).className();if(f){this._setParameter(this.selected.child()[0]);}if(g!==this.input.$value().value){this._setThumbImg();}},_setParameter:function(f){var d="";if(typeof f._element=="undefined"){d=f.element;}else{d=f._element;}var b="";var c="";var g="";try{if(d.tagName=="STRONG"){d=d.parentNode;}if(d.parentNode.tagName=="LI"||d.tagName=="EM"){if(d.className||d.parentNode.parentNode.className){b=d.className||d.parentNode.parentNode.className;}if(d.parentNode.tagName=="LI"){var a=d.parentNode.parentNode.className.replace(/ other/g,"");a=a.replace(/^\s+|\s+$/g,"");if(a.indexOf("_resultBox1")>-1){g="pre";}if(a.indexOf("_resultBox2")>-1){g="suf";}if(a.indexOf("_resultBox3")>-1){g="aut";}}if(d.tagName=="EM"){g="aut";}c="sta_hty.book";if(b&&c=="tab_sug.tx"){this.elForm.where.value=b;g_stab=b;}else{this.elForm.where.value=this.sWhereValue;g_stab=this.sStabValue;}if(c){this.elForm.sm.value=c;}if(g){this.elForm.sug.value=g;}return true;}return false;}catch(h){return false;}},_setLinkMove:function(a){if(!this.selected){return false;}this.input.$value().focus();this.input.$value().blur();if(this._setParameter(a)){this.watcher.stop();this.input.$value().value=this._getElementLast(this.selected).text();this.watcher.start();this.hide();this.fireEvent("actSubmit");}},onMouseOver:function(b){var a=b.element;if(!a||!a.tagName||a.tagName.toUpperCase()!="A"){return false;}if(!a.parentNode||!a.parentNode.tagName||a.parentNode.tagName.toUpperCase()!="LI"){return false;}if(this.selected){jindo.$Element(this.selected._element).removeClass("atcmp_on");}jindo.$Element(a.parentNode).addClass("atcmp_on");this.selected=jindo.$Element(a.parentNode);this._setThumbImg();},_checkTemplate:function(){this.listbox_fw="";this.listbox_bw="";this.listbox_dm="";this.template_fw="";this.template_bw="";this.template_dm="";var a=this._options;if(this.suggest._element.contentWindow.document.getElementById("atcmp").innerHTML.indexOf("@txt@")>-1){this.elFrameDiv=jindo.$Element(this.suggest._element.contentWindow.document.getElementById("atcmp"));this.elIngDiv=jindo.$Element(this.suggest._element.contentWindow.document.getElementById("atcmpIng"));this.elStartDiv=jindo.$Element(this.suggest._element.contentWindow.document.getElementById("atcmpStart"));this._elThumbImg=jindo.$Element(this.suggest._element.contentWindow.document.getElementById("sThumbImg"));jindo.$Fn(this.onMouseOver,this).attach(this.elFrameDiv,"mouseover");jindo.$Fn(this._setLinkMove,this).attach(this.elFrameDiv,"click");this.listbox_fw=this._findElement("."+a.listbox_fw,this.elFrameDiv.$value())[0];this.listbox_fw=this.listbox_fw?jindo.$Element(this.listbox_fw):null;this.listbox_bw=this._findElement("."+a.listbox_bw,this.elFrameDiv.$value())[0];this.listbox_bw=this.listbox_bw?jindo.$Element(this.listbox_bw):null;this.listbox_dm=this._findElement("."+a.listbox_dm,this.elFrameDiv.$value())[0];this.listbox_dm=this.listbox_dm?jindo.$Element(this.listbox_dm):null;this._elThumbDiv=this._findElement(".book_thumb",this.elFrameDiv.$value())[0];this._elThumbDiv=this._elThumbDiv?jindo.$Element(this._elThumbDiv):null;if(this.listbox_fw){this.template_fw=this.listbox_fw.html().replace(/^\s+|\s+$/g,"");}if(this.listbox_bw){this.template_bw=this.listbox_bw.html().replace(/^\s+|\s+$/g,"");}if(this.listbox_dm){this.template_dm=this.listbox_dm.html().replace(/^\s+|\s+$/g,"");}this.bCheckTemplate=true;this.elMoreBtn=this._findElement(".run_view",this.elFrameDiv.$value())[0];this.elHelpImg1=this.suggest._element.contentWindow.document.getElementById("help_tooltip1");this.elHelpImg2=this.suggest._element.contentWindow.document.getElementById("help_tooltip2");this.elHelpImg3=this.suggest._element.contentWindow.document.getElementById("help_tooltip3");this.elFunoffBtn=this._findElement(".funoff",this.elFrameDiv.$value())[0];this.elIngBtn=this._findElement(".funoff",this.elIngDiv.$value())[0];this.elStartBtn=this._findElement(".funoff",this.elStartDiv.$value())[0];jindo.$Fn(this._setMoreProcess,this).attach(this.elMoreBtn,"click");jindo.$Fn(jindo.$Fn(this._setFunctionOffImg,this).bind("on","1"),this).attach(this.elFunoffBtn,"mouseover");jindo.$Fn(jindo.$Fn(this._setFunctionOffImg,this).bind("off"),this).attach(this.elFunoffBtn,"mouseout");jindo.$Fn(jindo.$Fn(this._setFunctionOffImg,this).bind("on","2"),this).attach(this.elIngBtn,"mouseover");jindo.$Fn(jindo.$Fn(this._setFunctionOffImg,this).bind("off"),this).attach(this.elIngBtn,"mouseout");jindo.$Fn(jindo.$Fn(this._setFunctionOffImg,this).bind("on","3"),this).attach(this.elStartBtn,"mouseover");jindo.$Fn(jindo.$Fn(this._setFunctionOffImg,this).bind("off"),this).attach(this.elStartBtn,"mouseout");}else{this.suggest._element.src=this.suggest._element.src;}},setTplReplace:function(e,f,c,d){var g=new Object();var b=[];if(typeof c!="object"){g=f;}else{if(typeof f!="object"){g=c;}else{g=f;}}for(var a in g){b[a]=g[a];if(a=="txt"){b.txt=this.highlight(g.txt,this.sQuery[0],this.sQuery[1],d);}if(!g.propertyIsEnumerable(a)){continue;}e=e.replace(new RegExp("@"+a+"@","g"),b[a]);}return e;},_setFunctionOffImg:function(type,nNum){if(type=="on"){if(nNum){var sImgEl=eval("this.elHelpImg"+nNum);}else{var sImgEl=this.elHelpImg1;}jindo.$Element(sImgEl).show();jindo.$Element(sImgEl).css({bottom:"27px",right:"2px"});}else{jindo.$Element(this.elHelpImg1).hide();jindo.$Element(this.elHelpImg2).hide();jindo.$Element(this.elHelpImg3).hide();}},_setMoreProcess:function(c){var a=c.element;if(a.tagName=="A"){if(a.innerHTML=="끝단어 더보기"){this.sListMode="bw";}else{if(a.innerHTML=="첫단어 더보기"){var b="";this.sListMode="fw";}else{if(a.innerHTML=="주제별검색 더보기"){this.sListMode="mw";}}}this.input.$value().focus();this.input.$value().value=this.input.$value().value;}this.paint();c.stop();},paint:function(){if(this._options.disabled){return false;}if(!this.listbox_fw){this._checkTemplate();}if(!this.listbox_fw){return false;}this._setFunctionOffImg("off");var e=[];var s=[];var p=[];var r=this._data;var l=this._data_bw;var j=this._data_dm;var c=this._data_err;var n=this._data_bw_err;var h=this._data_dm_err;var b=this._options;var k=this;this.nListCnt=0;if(!this.sListMode){this.sListMode="fw";}var f=0;var q=0;var g=0;if(this.sListMode=="fw"){f=(r.length>0)?(r.length<11)?r.length:11:(c.length<11)?c.length:11;q=(l.length>0)?(f+l.length<13)?l.length:13-f:(f+n.length<13)?n.length:13-f;g=(j.length>0)?(f+q+j.length<16)?j.length:16-(f+q):(f+q+h.length<16)?h.length:16-(f+q);}if(this.sListMode=="bw"){q=(l.length>0)?(l.length<11)?l.length:11:(n.length<11)?n.length:11;f=(r.length>0)?(q+r.length<13)?r.length:13-q:(q+c.length<13)?c.length:13-q;g=(j.length>0)?(f+q+j.length<16)?j.length:16-(f+q):(f+q+h.length<16)?h.length:16-(f+q);}if(this.sListMode=="mw"){g=(j.length>0)?(j.length<11)?j.length:11:(h.length<11)?h.length:11;f=(r.length>0)?(g+r.length<13)?r.length:13-g:(g+c.length<13)?c.length:13-g;q=(l.length>0)?(g+f+l.length<16)?l.length:16-(g+f):(g+f+n.length<16)?n.length:16-(g+f);}var m=(r.length>f||c.length>f)?'<a href="#" onclick="return false;">첫단어 더보기</a>':"";var d=(l.length>q||n.length>q)?'<a href="#" onclick="return false;">끝단어 더보기</a>':"";if(f>0){this.listbox_fw.show();for(var o=0;o<f;o++){e[e.length]=this.setTplReplace(this.template_fw,r[o],c[o],false);}this.nListCnt++;this.listbox_fw.html(e.join(""));}else{this.listbox_fw.hide();this.listbox_fw.html("");}if(q>0){this.listbox_bw.show();for(var o=0;o<q;o++){s[s.length]=this.setTplReplace(this.template_bw,l[o],n[o],true);}this.listbox_bw.html(s.join(""));this.nListCnt++;}else{this.listbox_bw.hide();this.listbox_bw.html("");}if(g>0){this.listbox_dm.show();for(var o=0;o<g;o++){p[p.length]=this.setTplReplace(this.template_dm,j[o],h[o],false);}this.listbox_dm.html(p.join(""));this.nListCnt++;}else{this.listbox_dm.hide();this.listbox_dm.html("");}this.nTotalListCnt=f+q+g;if(this.nTotalListCnt>0){this._elThumbDiv.className("book_thumb");this._elThumbImg._element.src="https://ssl.pstatic.net/static/book/image/thumb_atcmp2.gif";this._elThumbImg._element.parentNode.href="#";this._sTmpImg="";var a=this._getFrameElement("atcmp");a.show();this.show();this._searchStatus="";}else{this.hide();this._setStatusLayer();}if(this.sListMode=="bw"){this.elMoreBtn.innerHTML=m;}else{if(this.sListMode=="fw"){this.elMoreBtn.innerHTML=d;}else{if(this.sListMode=="mw"){}}}return this;},_getImgUrl:function(a){var g=8-a.length;var b="";for(var c=0;c<g;c++){b=b+"0";}var e=b+a;var d=[];d[0]=e.substring(0,3);d[1]=e.substring(3,6);var f="";if(__bLogin){if(__bAdult){f="https://bookthumb-phinf.pstatic.net/cover/"+d[0]+"/"+d[1]+"/"+e+".jpg?type=m1";}else{if(this._htAdultInfoData[a]["bAdultType"]==1&&this._htAdultInfoData[a]["bNeedAdultConfirm"]==1){f="https://ssl.pstatic.net/static/book/image/adult_img3.gif";}else{f="https://bookthumb-phinf.pstatic.net/cover/"+d[0]+"/"+d[1]+"/"+e+".jpg?type=m1";}}}else{if(this._htAdultInfoData[a]["bAdultType"]==1&&this._htAdultInfoData[a]["bNeedAdultConfirm"]==1){f="https://ssl.pstatic.net/static/book/image/adult_img3.gif";}else{f="https://bookthumb-phinf.pstatic.net/cover/"+d[0]+"/"+d[1]+"/"+e+".jpg?type=m1";}}return f;},_setThumbImg:function(){var e=jindo.cssquery("> span",jindo.$(this.selected._element));var f=0;if(e.length>1){f=jindo.$Element(e[0]).text();}else{f=null;}var b=this._elThumbImg._element;if(!parseInt(f)){b.src="https://ssl.pstatic.net/static/book/image/thumb_atcmp2.gif";b.parentNode.href="#";b.parentNode.onclick=function(){return false;};return false;}var a=this._getImgUrl(f);var c=this;if(!this._sTmpImg||this._sTmpImg!=a){var d="/bookdb/book_detail.nhn?bid="+f+"&sug=thumb";b.parentNode.href=d;b.parentNode.onclick=function(){};this._oImgInstance.onerror=function(){b.src="https://ssl.pstatic.net/static/book/image/noimg3.gif";};this._oImgInstance.onload=function(){b.src=a;b.parentNode.href=d;};this._oImgInstance.src=a;this._sTmpImg=a;}},_setStatusLayer:function(){if(this._searchStatus){if(this._searchStatus=="Triangle_false"){var a=this._getFrameElement("atcmpStart");a.show();this.show();}else{if(this._searchStatus=="Triangle_true"){var a=this._getFrameElement("atcmpIng");a.show();this.show();}}}this._searchStatus="";},unuseSuggest:function(){this.setCookie("NaverSuggestUse","unuse",21900,"book.naver.com");var b=this._options;this._setFunctionOffImg("off");this.hide();b.disabled=true;this._setTriangleImg("hide");this.input.$value().focus();this.input.$value().blur();var a=this;setTimeout(function(){a.input.$value().focus();},50);},useSuggest:function(){this.setCookie("NaverSuggestUse","use",21900,"book.naver.com");var a=this._options;a.disabled=false;}}).extend(nhn.AutoComplete);